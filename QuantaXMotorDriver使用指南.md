### 写在前面
本驱动为原型机，部分电路板以及连线裸露在外。
**使用时，请千万注意绝缘处理！！！
使用时，请千万注意绝缘处理！！！
使用时，请千万注意绝缘处理！！！**

### 硬件接口
硬件上的接口是两个9针D形口，与原生电机接口相对应，两个接口分别独立控制一个轴向的电机。

### 保护行为
电机在运行的过程中检测到两侧限位传感器会触发自动保护，保护行为是：
立即终止当前轴向运行，并回退1000步的安全距离。
执行过保护指令后方可继续响应用户的指令。

### 指令
| 指令   | 作用                      | 用法<内为必须参数>       |
| ------ | ------------------------- | ------------------------ |
| zero   | 单轴归零                  | zero <x/y>               |
| ab     | 单轴中止运行              | ab <x/y>                 |
| ctrl   | 控制单轴运行              | ctrl <x/y> <速度> <步数> |
| echoff | 关闭shell回显（机器模式） | echoff                   |
| e      | 打开shell回显（人类模式） | e                        |
| set    | 设置细分                  | set <x/y> <细分数>       |
以上指令（除了echoff和e）均可通过只输入指令，不输入参数的方式获取对应的用法提示。其中，mstep可用的细分数是一系列特定的值（上电默认设定为25000），请参见shell用法提示选择合适的细分数。

附mstep可用细分数：200、400、800、1600、3200、6400、12800、25600、1000、2000、4000、5000、8000、10000、20000、25000

以下是一些简单的指令示例：
* 将X轴归零：`zero x`
* 将Y轴归零：`zero y`
* 中止轴向同理
* 控制X轴**正向运行**，运行速度为50000（Hz，对应每秒发送给步进电机的脉冲数，实际的电机速度还取决于电机驱动的细分数），运行步数为125000（该步数在默认25000细分下位移距离为5mm）：
	`ctrl x 50000 125000`
* 控制X轴**反向运行**，运行速度为50000（Hz，对应每秒发送给步进电机的脉冲数，实际的电机速度还取决于电机驱动的细分数），运行步数为125000（该步数在默认25000细分下位移距离为5mm）：
	`ctrl x -50000 125000`

### 辅助工具：指令解释器使用指南
指令解释器为一Windows端可执行程序，解释器的主要功能是：
解释使用文本文件编写的脚本，进而实现位移台的自动化运行。

适用于位移台的脚本有固定的格式和要求：
* 脚本第一行用于描述串口设备信息：端口号（COMn）以及波特率（默认为9600）
* 为了使解释器获取有效的运行信息，需要在脚本运行前关闭shell回显，进入机器模式（echoff）
* 脚本特有的关键词有两个：`while`和`delay`，用法如下：
	while的用法：
		while+空格+正整数代表的循环次数
		循环体
		endwhile
	delay的用法：delay+空格+正数代表的延时时间（单位为秒，可以为浮点数）
* 此外可以使用的指令都是上述提到的shell指令，用法与功能和上方介绍相同
* 为了脚本的可读性，可以向脚本中插入空行，解释器会自动忽略空行

一个简单的脚本如下：
```
COM9 9600 

echoff

ctrl x 50000 125000
delay 1
ctrl x 50000 125000

while 3
ctrl y 50000 125000
ctrl x 50000 125000
ctrl y -50000 125000
ctrl x -50000 125000
endwhile

e
```
解释器的使用方法很简单：将脚本文件使用鼠标拖动到解释器的可执行文件上，松手即可开始执行。
执行的过程中有命令行提示，如果脚本有拼写错误，解释器会检查并报错，请关注解释器的工作窗口信息。
脚本执行完后，解释器窗口不会退出，以便用户离开一段时间后回来可以得知脚本的运行情况。

注：当前解释器不支持x、y轴同时运行，后续更新会添加该功能。